# r_linreg

This program is a wrapper for linear regression performed by the [statsmodels package](https://www.statsmodels.org/stable/index.html). In addition to returning a regression model, the program can report virtually every intermediary and end result of that computation. The program uses statsmodels for simple or multiple linear regression analysis, but the user does not need to know how to use that package. Instead, the main function, linreg(), takes two parameters, X and y, and computes everything most users would care to know, and more.

The purpose of this module is not speed or versatility. The goals are very restricted and are:

1. **Provide easy access to linear regression analysis.** "Easy" means there is a single command that takes one or more "X" variable(s) and a "y" variable. "Easy" also means that r_linreg can take "X" and "y" either as python lists or pandas Series/DataFrames.

2. **Retrieve underlying parameters** generated by regression analysis easily.

## Installation

No specific installation is require beyond installing dependencies (see below).

## Data inputs:
- **X**: python list, pandas.Series, or pandas.DataFrame
- **y**: python list, pandas.Series, or pandas.DataFrame

X and y are two separate data structures (e.g., 2 lists or 2 DataFrames). Data (X and y) are examined for validity of format and content. Python list and pandas.Series are converted to a pandas.DataFrame before computations are conducted. The index for DataFrames is reset to 1 for cases where X or y comprise a subset of the original pandas data.

For multiple regression, with more than one X variable, n-dimensional lists _can_ be used, but for simplicity's sake, use pandas.DataFrames for input. Formatting a multi-dimension list so that rows and columns are what is expected can be challenging, but a DataFrame makes organizing data correctly very easy.

## Usage

For details, use info.usage() or info.methods()

&nbsp;&nbsp;&nbsp;&nbsp;`>>> import r_linreg`

Submodules can be imported separately...</br>
&nbsp;&nbsp;&nbsp;&nbsp;`>>> import info, reports, transform, ancillary`

However, r_linreg.py imports all of the submodules, so the following lines of code are equivalent:</br>
&nbsp;&nbsp;&nbsp;&nbsp;`>>>info.calculation("x_bar")`</br>
&nbsp;&nbsp;&nbsp;&nbsp;`>>>r_linreg.info.calculation("x_bar")`

linreg() returns a dictionary containing all intermediary and end results of linear regression.</br>
&nbsp;&nbsp;&nbsp;&nbsp;`>>> results = r_linreg.linreg(X, y)`

Access individual parameters (quotes required)</br>
&nbsp;&nbsp;&nbsp;&nbsp;`>>> results['r_squared']` --> 0.9949660912754924

Print an anova table containing regression parameters.</br>
&nbsp;&nbsp;&nbsp;&nbsp;`reports.anova(results)`

Print all variables accessible to the user as an organized list.</br>
&nbsp;&nbsp;&nbsp;&nbsp;`info.print_variables()`

Print the entire output of linear regression as an organized list.</br>
&nbsp;&nbsp;&nbsp;&nbsp;`reports.print_variables(results)` **OR**</br>
&nbsp;&nbsp;&nbsp;&nbsp;`info.print_variables(results)`

>&nbsp;&nbsp;&nbsp;&nbsp;n: 17</br>
&nbsp;&nbsp;&nbsp;&nbsp;k: 1</br>
&nbsp;&nbsp;&nbsp;&nbsp;sumx: 3450.2</br>
&nbsp;&nbsp;&nbsp;&nbsp;sumx2: 700759.02</br>
&nbsp;&nbsp;&nbsp;&nbsp;sumxy: 482143.511</br>
&nbsp;&nbsp;&nbsp;&nbsp;sumy: 2373.3</br>
&nbsp;&nbsp;&nbsp;&nbsp;sumy2: 331754.4034</br>
&nbsp;&nbsp;&nbsp;&nbsp;x_bar: 202.95294117647057</br>
&nbsp;&nbsp;&nbsp;&nbsp;y_bar: 139.6058823529412</br>
&nbsp;&nbsp;&nbsp;&nbsp;SXX: 530.7823529411756</br>
&nbsp;&nbsp;&nbsp;&nbsp;SXY: 475.2957058823527</br>
&nbsp;&nbsp;&nbsp;&nbsp;SYY: 427.76281176470604</br>
&nbsp;&nbsp;&nbsp;&nbsp;. . .

Print description or calculation methods for any variable:</br>
&nbsp;&nbsp;&nbsp;&nbsp;`info.description("x_bar")` --> mean of xi; one mean for each X column</br>
&nbsp;&nbsp;&nbsp;&nbsp;`info.calculation("x_bar")` --> sum(xi)/n or np.mean(x)

Print complete information about a variable (computed value, description, calculation method):</br>
&nbsp;&nbsp;&nbsp;&nbsp;`info.var_info(results, "x_bar")`</br>
>**RESULTS FOR x_bar**</br>
>     202.95294117647057</br>
></br>
>**DESCRIPTION:**</br>
> mean of xi; one mean for each X column
>
>
>**CALCULATION:**</br>
> sum(xi)/n or np.mean(x)

## Files
- `r_linreg.py`: entry point for linear regression analysis;</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all calculations returned as a dictionary
- `info.py`: help information about usage, methods, and regression variables
- `reports.py`: formatted reporting of regression results
- `transform.py`: methods for transforming columns of data in pandas DataFrames
- `ancillary.py`: ancillary functions that use regression results


## Dependencies
- [numpy](https://numpy.org/)
- [pandas](https://pandas.pydata.org/)
- [patsy](https://patsy.readthedocs.io/en/latest/)
- [statsmodels](https://www.statsmodels.org/stable/index.html)
- [sklearn](https://scikit-learn.org/stable/index.html) (for transform methods)
